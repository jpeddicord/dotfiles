# https://github.com/anishathalye/dotbot

- defaults:
    link:
      create: true
      relink: true
    shell:
      stdout: true
      stderr: true

- clean:
  - '~'
  - '~/.config'
  - '~/.ssh'

- shell:
  - git submodule update --init --recursive
  - sh -c 'which mise || ./mise.run.sh'

- link:
    ~/:
      glob: true
      path: files/*
      prefix: '.'
      exclude:
        - files/_*

    # underscored directories -> merge with contents instead of link
    ~/.config:
      glob: true
      path: files/_config/*
    ~/.ssh:
      glob: true
      path: files/_ssh/*

# mac-specifc
- link:
    ~/Library/Application Support/nushell:
      path: ~/.config/nushell
      if: sh -c '[ `uname` = Darwin ]'

- shell:
  # add a blank config file for mise commands to edit, instead of dotfiles
  - touch ~/.config/mise/config.toml
  - ~/.local/bin/mise install
